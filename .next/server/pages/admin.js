(()=>{var a={};a.id=309,a.ids=[220,309],a.modules={361:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1909:(a,b,c)=>{"use strict";c.r(b),c.d(b,{config:()=>u,default:()=>q,getServerSideProps:()=>t,getStaticPaths:()=>s,getStaticProps:()=>r,handler:()=>C,reportWebVitals:()=>v,routeModule:()=>B,unstable_getServerProps:()=>z,unstable_getServerSideProps:()=>A,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>x,unstable_getStaticProps:()=>w});var d={};c.r(d),c.d(d,{default:()=>o});var e=c(3885),f=c(237),g=c(1413),h=c(5611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(2015);c(7898);var n=c(7189);function o(){let[a,b]=(0,m.useState)(""),[c,d]=(0,m.useState)(!1),[e,f]=(0,m.useState)({}),[g,h]=(0,m.useState)([]),[i,j]=(0,m.useState)(""),[k,o]=(0,m.useState)(""),[p,q]=(0,m.useState)(""),[r,s]=(0,m.useState)(!1),t=async()=>{if("admin123"===a){d(!0),q("");try{let a=await fetch(`${n.J}/api/results`);a.ok?f((await a.json()).votes):q("Failed to load results.")}catch(a){q("Error connecting to the server.")}}else q("Invalid password.")},u=async()=>{s(!0);try{(await fetch(`${n.J}/api/update-votes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({votes:e,adminPassword:a})})).ok?(q(""),alert("Votes updated successfully!")):q("Failed to update votes.")}catch(a){q("Error connecting to the server.")}finally{s(!1)}},v=async()=>{s(!0);try{let b=await fetch(`${n.J}/api/update-config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startTime:i,endTime:k,adminPassword:a})});if(b.ok)q(""),alert("Election times updated successfully!");else{let a=await b.json();q(a.error||"Failed to update election times.")}}catch(a){q("Error connecting to the server.")}finally{s(!1)}},w=[...new Set(g.map(a=>a.position))];return(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("h1",{className:"page-title",children:"NACOS Election Admin"}),c?(0,l.jsxs)("div",{className:"admin-panel",children:[p&&(0,l.jsx)("p",{className:"error-message",children:p}),(0,l.jsxs)("div",{className:"config-section",children:[(0,l.jsx)("h3",{className:"section-subtitle",children:"Election Schedule"}),(0,l.jsxs)("div",{className:"config-item",children:[(0,l.jsx)("label",{children:"Start Time:"}),(0,l.jsx)("input",{type:"datetime-local",value:i,onChange:a=>j(a.target.value),className:"config-input"})]}),(0,l.jsxs)("div",{className:"config-item",children:[(0,l.jsx)("label",{children:"End Time:"}),(0,l.jsx)("input",{type:"datetime-local",value:k,onChange:a=>o(a.target.value),className:"config-input"})]}),(0,l.jsx)("button",{onClick:v,disabled:r,className:"submit-button",children:r?"Saving...":"Save Election Times"})]}),(0,l.jsxs)("div",{className:"vote-section",children:[(0,l.jsx)("h3",{className:"section-subtitle",children:"Manage Votes"}),w.map(a=>(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"section-subtitle",children:a}),g.filter(b=>b.position===a).map(b=>(0,l.jsxs)("div",{className:"vote-item",children:[(0,l.jsx)("span",{children:b.name}),(0,l.jsx)("input",{type:"number",min:"0",value:e[a]?.[b.id]||0,onChange:c=>{var d,e;return d=b.id,e=c.target.value,void f(b=>({...b,[a]:{...b[a],[d]:parseInt(e)||0}}))},className:"vote-input"})]},b.id))]},a)),(0,l.jsx)("button",{onClick:u,disabled:r,className:"submit-button",children:r?"Saving...":"Save Vote Changes"})]})]}):(0,l.jsxs)("div",{className:"admin-login",children:[(0,l.jsx)("input",{type:"password",value:a,onChange:a=>b(a.target.value),placeholder:"Enter admin password",className:"password-input"}),(0,l.jsx)("button",{onClick:t,className:"submit-button",children:"Login"}),p&&(0,l.jsx)("p",{className:"error-message",children:p})]})]})}var p=c(2289);let q=(0,g.M)(d,"default"),r=(0,g.M)(d,"getStaticProps"),s=(0,g.M)(d,"getStaticPaths"),t=(0,g.M)(d,"getServerSideProps"),u=(0,g.M)(d,"config"),v=(0,g.M)(d,"reportWebVitals"),w=(0,g.M)(d,"unstable_getStaticProps"),x=(0,g.M)(d,"unstable_getStaticPaths"),y=(0,g.M)(d,"unstable_getStaticParams"),z=(0,g.M)(d,"unstable_getServerProps"),A=(0,g.M)(d,"unstable_getServerSideProps"),B=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/admin",pathname:"/admin",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),C=(0,p.U)({srcPage:"/admin",config:u,userland:d,routeModule:B,getStaticPaths:s,getStaticProps:r,getServerSideProps:t})},2015:a=>{"use strict";a.exports=require("react")},3679:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},7189:(a,b,c)=>{"use strict";c.d(b,{J:()=>d});let d="https://nacos-election-portal-5.onrender.com"},7898:()=>{},8732:a=>{"use strict";a.exports=require("react/jsx-runtime")},9902:a=>{"use strict";a.exports=require("path")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[611,157],()=>b(b.s=1909));module.exports=c})();