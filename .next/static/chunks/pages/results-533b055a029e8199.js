(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{311:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});let a="https://nacos-election-portal-5.onrender.com"},597:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(7876),n=s(4232);function c(){return(0,a.jsx)("footer",{className:"footer",children:(0,a.jsxs)("p",{children:["Built with ",(0,a.jsx)("span",{className:"heart",children:"❤️"})," by Harun"]})})}s(6264);var l=s(311);function i(){let[e,t]=(0,n.useState)({}),[s,i]=(0,n.useState)([]),[r,o]=(0,n.useState)(""),[d,u]=(0,n.useState)("pending");(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat(l.J,"/api/results"));if(e.ok){let s=await e.json();t(s.votes)}else o("Failed to fetch election results.")}catch(e){o("Error connecting to the server.")}},s=async()=>{try{let e=await fetch("".concat(l.J,"/api/election-status"));if(e.ok){let t=await e.json();u(t.status),"pending"===t.status&&o("Election has not started yet. Results are not available.")}else o("Failed to fetch election status.")}catch(e){o("Error connecting to the server.")}};(async()=>{try{let e=await fetch("".concat(l.J,"/api/candidates"));if(e.ok){let t=await e.json();i(t)}else o("Failed to load candidates.")}catch(e){o("Error connecting to the server.")}})(),e(),s();let a=setInterval(e,5e3);return()=>clearInterval(a)},[]);let h=[...new Set(s.map(e=>e.position))];return(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("h1",{className:"page-title",children:"NACOS Election Results"}),r&&(0,a.jsx)("p",{className:"error-message",children:r}),"pending"!==d&&(0,a.jsx)("div",{className:"results-section",children:h.map(t=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"section-subtitle",children:t}),(0,a.jsx)("div",{className:"results",children:s.filter(e=>e.position===t).map(s=>{var n;let c=(null==(n=e[t])?void 0:n[s.id])||0,l=Object.values(e[t]||{}).reduce((e,t)=>e+t,0),i=l>0?c/l*100:0;return(0,a.jsxs)("div",{className:"result-item",children:[(0,a.jsx)("span",{className:"candidate-name",children:s.name}),(0,a.jsx)("div",{className:"vote-bar",children:(0,a.jsx)("div",{className:"vote-fill",style:{width:"".concat(i,"%")},children:(0,a.jsx)("span",{className:"vote-count",children:c})})})]},s.id)})})]},t))}),(0,a.jsx)(c,{})]})}},820:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/results",function(){return s(597)}])},6264:()=>{}},e=>{e.O(0,[636,593,792],()=>e(e.s=820)),_N_E=e.O()}]);